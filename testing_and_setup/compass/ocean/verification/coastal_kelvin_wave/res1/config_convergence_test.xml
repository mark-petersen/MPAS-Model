<?xml version="1.0"?>
<config case="convergence_test">

    <add_link source_path="script_test_dir" source="convergence_test.py" dest="convergence_test.py"/>
    <add_executable source="model" dest="ocean_model"/>

	<namelist name="namelist.ocean.init" mode="init">
		<option name="config_init_configuration">'verification'</option>
		<option name="config_verification_case">1</option>
		<option name="config_verification_vert_levels">1</option>
		<option name="config_global_ocean_deepen_critical_passages">.false.</option>
	</namelist>

	<streams name="streams.ocean.init" keep="immutable" mode="init">
		<template file="template_initial_state.xml" path_base="script_configuration_dir"/>
		<template file="template_critical_passages.xml" path_base="script_core_dir" path="global_ocean"/>
	</streams>

	<namelist name="namelist.ocean.forward" mode="forward">
		<template file="template_forward.xml" path_base="script_configuration_dir"/>
		<template file="template_forward.xml" path_base="script_test_dir"/>
	</namelist>

	<streams name="streams.ocean.forward" keep="immutable" mode="forward">
		<template file="template_forward.xml" path_base="script_configuration_dir"/>
		<template file="template_forward.xml" path_base="script_test_dir"/>
	</streams>

	<run_script name="run.py">
		<step executable="create_meshes.py">
			<argument flag="--temp">10</argument>
		</step>
	</run_script>

	<run_script name="run.py">
		<step executable="./convergence_test.py">
			<argument flag="--minCellWidth">16</argument>
			<argument flag="--maxCellWidth">64</argument>
			<argument flag="--factorCellWidth">2</argument>
		</step>
	</run_script>
</config>
